---
import type { CollectionEntry } from 'astro:content';
import BaseHead from '$/components/BaseHead.astro';
import MainLayout from '$/components/MainLayout.astro';
import Prose from '$/components/Prose.astro';
import { SITE } from '$/config';
import estimateReadingTime from '$/utils/estimateReadingTime';
import PostHeader from '../components/PostHeader.astro';
import RelatedPosts from '../components/RelatedPosts.astro';
import ShareButtons from '../components/ShareButtons.astro';

interface Props {
	content: CollectionEntry<'blog'>['data'];
	slug: string;
	readingTime: number;
}

const { content, slug, readingTime } = Astro.props;
---
<!doctype html>
<html lang="ja">
  <head>
    <BaseHead {...content} title={ content.title ? `${ SITE.title } | ${content.title}` : SITE.title }/>
  </head>
  <MainLayout>
    <PostHeader title={content.title} publicationDate={content.publicationDate} tags={content.tags} readingTime={readingTime} class="mb-4" />
    <hr class="mb-16 border-gray-300" />
    <Prose>
      <slot />
      <ShareButtons class="mt-16 not-prose" blogTitle={content.title} />
      <RelatedPosts class="mt-16" slug={slug} tags={content.tags} />
    </Prose>
  </MainLayout>
</html>