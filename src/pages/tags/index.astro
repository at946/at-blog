---
export const prerender = true

import { getCollection } from 'astro:content';
import DefaultPageLayout from '$/layouts/default.astro'

let title = 'All Tags'
let description = 'ブログのタグを集めました。'


const allPosts = await getCollection('blog', ({ data }) => data.published && !!data.tags );
const tags = [...new Set([].concat.apply([], allPosts.map(post => post.data.tags)))]
---

<DefaultPageLayout content={{ title, description }}>
    <ul class="list-none flex gap-2 flex-wrap justify-center">
     {tags.map((tag) => (
        <li>
            <a
                class="inline-block text-xl px-4 py-1 rounded-full text-theme-accent-gray-light bg-theme-primary dark:bg-theme-dark-primary dark:text-theme-accent-gray-light hover:bg-theme-secondary dark:hover:bg-theme-dark-secondary dark:hover:text-theme-dark-primary"
                href={`/tags/${tag}`}
                title={`View posts tagged under "${tag}"`}
                transition:animate="slide"
            >
                {tag}
            </a>
        </li>
    ))}
    </ul>
</DefaultPageLayout>

<style>
    .tag-list {
        @apply list-none flex gap-2 flex-wrap
    }
    .tag {
        @apply inline-block text-xl px-4 py-1 rounded-full text-theme-primary bg-theme-dark-primary dark:bg-theme-primary dark:text-theme-dark-primary hover:bg-theme-primary hover:text-theme-dark-primary dark:hover:bg-theme-dark-primary dark:hover:text-theme-primary
    }
</style>
