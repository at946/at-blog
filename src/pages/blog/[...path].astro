---
export const prerender = true;

import { getCollection, getEntry, getEntryBySlug } from 'astro:content';
import PostLayout from '@layouts/post.astro';
import estimateReadingTime from '@utils/estimateReadingTime';

export async function getStaticPaths() {
	const allPosts = await getCollection('blog');
	return allPosts.map((post) => ({
		params: {
			path: post.slug,
		},
	}));
}

const { path } = Astro.params;
const entry = await getEntry('blog', path);

const { data, body } = entry;
const readingTime: number = estimateReadingTime(body.length);
const { Content } = await entry.render();
---
<PostLayout content={data} slug={path} readingTime={readingTime}>
    <Content />
</PostLayout>
